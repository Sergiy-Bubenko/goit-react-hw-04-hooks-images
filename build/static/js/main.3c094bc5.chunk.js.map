{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","onSubmit","useState","requestValue","setRequestValue","className","event","preventDefault","trim","toast","error","type","name","value","onChange","evt","target","toLowerCase","autoComplete","autoFocus","placeholder","ImageGalleryItem","arrImages","givLinkForModal","map","obj","id","onClick","src","webformatURL","alt","Button","onLoadMore","modalRoot","document","querySelector","Modal","onClose","children","handleKeyDown","e","code","console","log","useEffect","window","addEventListener","removeEventListener","createPortal","currentTarget","ImageGallery","pageNumber","setPageNumber","setArrImages","setError","status","setStatus","modalImage","setModalImage","showModal","setShowModal","stopFetchOfRequest","setStopFetchOfRequest","stopFetchOfPages","setStopFetchOfPages","onRequest","fetch","then","response","ok","json","Promise","reject","Error","arr","prevArrImages","length","hits","catch","finally","scrollTo","top","documentElement","scrollHeight","behavior","toggleModal","color","height","width","timeout","objId","find","Number","largeImageURL","prevPageNumber","App","requestValueOfSearchbar","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"2RAKe,SAASA,EAAT,GAAkC,IAAbC,EAAY,EAAZA,SAClC,EAAwCC,mBAAS,IAAjD,mBAAOC,EAAP,KAAqBC,EAArB,KAeA,OACE,wBAAQC,UAAU,YAAlB,SACE,uBAAMJ,SAZW,SAACK,GAGpB,GAFAA,EAAMC,iBAEsB,KAAxBJ,EAAaK,OACf,OAAOC,IAAMC,MAAM,yFAErBN,EAAgB,IAChBH,EAASE,IAKuBE,UAAU,aAAxC,UACE,wBAAQM,KAAK,SAASN,UAAU,oBAAhC,SACE,sBAAMA,UAAU,0BAAhB,sBAGF,uBACEA,UAAU,mBACVM,KAAK,OACLC,KAAK,eACLC,MAAOV,EACPW,SAzBoB,SAACC,GAAD,OAC1BX,EAAgBW,EAAIC,OAAOH,MAAMI,gBAyB3BC,aAAa,MACbC,WAAS,EACTC,YAAY,kC,4BClCP,SAASC,EAAT,GAA2D,IAA/BC,EAA8B,EAA9BA,UAAWC,EAAmB,EAAnBA,gBACpD,OAAOD,EAAUE,KAAI,SAACC,GACpB,OACE,oBACEpB,UAAU,mBAEVqB,GAAID,EAAIC,GACRC,QAASJ,EAJX,SAME,qBAAKlB,UAAU,yBAAyBuB,IAAKH,EAAII,aAAcC,IAAI,MAJ9DL,EAAIC,OCPF,SAASK,EAAT,GAAiC,IAAfC,EAAc,EAAdA,WAC/B,OACE,wBAAQ3B,UAAU,SAASM,KAAK,SAASgB,QAASK,EAAlD,uBCCJ,IAAMC,EAAYC,SAASC,cAAc,eAE1B,SAASC,EAAT,GAAuC,IAAtBC,EAAqB,EAArBA,QAASC,EAAY,EAAZA,SACjCC,EAAgB,SAACC,GACN,WAAXA,EAAEC,MACJJ,IAEFK,QAAQC,IAAI,QAGdC,qBAAU,WAER,OADAC,OAAOC,iBAAiB,UAAWP,GAC5B,WACLM,OAAOE,oBAAoB,UAAWR,OAU1C,OAAOS,uBACL,qBAAK3C,UAAU,UAAUsB,QAPC,SAACa,GACvBA,EAAES,gBAAkBT,EAAExB,QACxBqB,KAKF,SACE,qBAAKhC,UAAU,QAAf,SAAwBiC,MAE1BL,GCrBW,SAASiB,EAAT,GAAyC,IAAjB/C,EAAgB,EAAhBA,aACrC,EAAoCD,mBAAS,GAA7C,mBAAOiD,EAAP,KAAmBC,EAAnB,KACA,EAAkClD,mBAAS,IAA3C,mBAAOoB,EAAP,KAAkB+B,EAAlB,KACA,EAA0BnD,mBAAS,MAAnC,mBAAOQ,EAAP,KAAc4C,EAAd,KACA,EAA4BpD,mBAAS,QAArC,mBAAOqD,EAAP,KAAeC,EAAf,KACA,EAAoCtD,mBAAS,IAA7C,mBAAOuD,EAAP,KAAmBC,EAAnB,KACA,EAAkCxD,oBAAS,GAA3C,mBAAOyD,EAAP,KAAkBC,EAAlB,KACA,EAAoD1D,oBAAS,GAA7D,mBAAO2D,EAAP,KAA2BC,EAA3B,KACA,EAAgD5D,oBAAS,GAAzD,mBAAO6D,EAAP,KAAyBC,EAAzB,KAEMC,EAAY,WA+BhB,OA9BAT,EAAU,WACVU,MAAM,8BAAD,OAC2B/D,EAD3B,iBACgDgD,EADhD,gBAdU,qCAcV,yDAGFgB,MAAK,SAACC,GACL,OAAIA,EAASC,GACJD,EAASE,OAEXC,QAAQC,OAAO,IAAIC,MAAJ,uGAA+BtE,QAEtDgE,MAAK,SAACO,GACLrB,GAAa,SAACsB,GACZ,OAAIA,EAAcC,OAAS,EACnB,GAAN,mBAAWD,GAAX,YAA6BD,EAAIG,OAE5BH,EAAIG,QAEbrB,EAAU,eAEXsB,OAAM,SAACpE,GACN4C,EAAS5C,GACT8C,EAAU,eAEXuB,SAAQ,WACPlC,OAAOmC,SAAS,CACdC,IAAK/C,SAASgD,gBAAgBC,aAC9BC,SAAU,cAIT,WACLvC,OAAOmC,SAAS,CACdC,IAAK/C,SAASgD,gBAAgBC,aAC9BC,SAAU,aAKhBxC,qBAAU,WACR,GAAIiB,EACF,OAAOC,GAAsB,GAG/BG,IACAZ,EAAa,IACbD,EAAc,KACb,CAACjD,IAEJyC,qBAAU,WACR,GAAImB,EACF,OAAOC,GAAoB,GAE7BC,MACC,CAACd,IAEJ,IAAMkC,EAAc,WAClBzB,GAAcD,IAchB,MAAe,SAAXJ,EACK,iFAGM,YAAXA,EAEA,cAAC,IAAD,CACE5C,KAAK,OACL2E,MAAM,UACNC,OAAQ,IACRC,MAAO,IACPC,QAAS,MAKA,aAAXlC,EACK,8BAAM7C,IAGU,IAArBY,EAAUsD,OAEV,2EAC2CzE,EAD3C,4BAMW,aAAXoD,EAEA,qCACE,oBAAIlD,UAAU,eAAd,SACE,cAACgB,EAAD,CACEC,UAAWA,EACXC,gBA7Cc,SAACiB,GACvB,IAAMkD,EAAQpE,EAAUqE,MAAK,SAAClE,GAAD,OAASA,EAAIC,KAAOkE,OAAOpD,EAAES,cAAcvB,OAExEgC,EAAcgC,EAAMG,eACpBR,SA4CK/D,EAAUsD,OAAS,GAAK,cAAC7C,EAAD,CAAQC,WAzCpB,WACjBoB,GAAc,SAAC0C,GAAD,OAAoBA,EAAiB,QAyC9CnC,GACC,cAACvB,EAAD,CAAOC,QAASgD,EAAa1B,UAAWA,EAAxC,SACE,qBAAK/B,IAAK6B,EAAY3B,IAAI,eAZpC,EC/Ga,SAASiE,IACtB,MAAwC7F,mBAAS,IAAjD,mBAAOC,EAAP,KAAqBC,EAArB,KAMA,OACE,sBAAKC,UAAU,MAAf,UACE,cAACL,EAAD,CAAWC,SANU,SAAC+F,GACxB5F,EAAgB4F,MAMd,cAAC9C,EAAD,CAAc/C,aAAcA,IAC5B,cAAC,IAAD,CAAgB8F,UAAW,UCbjCC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFlE,SAASmE,eAAe,W","file":"static/js/main.3c094bc5.chunk.js","sourcesContent":["import { useState } from 'react'\nimport { toast } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\nimport PropTypes from 'prop-types'\n\nexport default function Searchbar({ onSubmit }) {\n  const [requestValue, setRequestValue] = useState('')\n\n  const handleRequestChange = (evt) =>\n    setRequestValue(evt.target.value.toLowerCase())\n\n  const handleSubmit = (event) => {\n    event.preventDefault()\n\n    if (requestValue.trim() === '') {\n      return toast.error('измените запрос')\n    }\n    setRequestValue('')\n    onSubmit(requestValue)\n  }\n\n  return (\n    <header className=\"Searchbar\">\n      <form onSubmit={handleSubmit} className=\"SearchForm\">\n        <button type=\"submit\" className=\"SearchForm-button\">\n          <span className=\"SearchForm-button-label\">Search</span>\n        </button>\n\n        <input\n          className=\"SearchForm-input\"\n          type=\"text\"\n          name=\"requestValue\"\n          value={requestValue}\n          onChange={handleRequestChange}\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n        />\n      </form>\n    </header>\n  )\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n}\n","import PropTypes from 'prop-types'\n\nexport default function ImageGalleryItem({ arrImages, givLinkForModal }) {\n  return arrImages.map((obj) => {\n    return (\n      <li\n        className=\"ImageGalleryItem\"\n        key={obj.id}\n        id={obj.id}\n        onClick={givLinkForModal}\n      >\n        <img className=\"ImageGalleryItem-image\" src={obj.webformatURL} alt=\"\" />\n      </li>\n    )\n  })\n}\n\nImageGalleryItem.propTypes = {\n  givLinkForModal: PropTypes.func,\n  arrImages: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number,\n      webformatURL: PropTypes.string,\n    }),\n  ),\n}\n","export default function Button({ onLoadMore }) {\n  return (\n    <button className=\"Button\" type=\"button\" onClick={onLoadMore}>\n      Load more\n    </button>\n  )\n}\n","import { useEffect } from 'react'\nimport { createPortal } from 'react-dom'\n\nconst modalRoot = document.querySelector('#modal-root')\n\nexport default function Modal({ onClose, children }) {\n  const handleKeyDown = (e) => {\n    if (e.code === 'Escape') {\n      onClose()\n    }\n    console.log('esc')\n  }\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown)\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown)\n    }\n  })\n\n  const handleBackdropClick = (e) => {\n    if (e.currentTarget === e.target) {\n      onClose()\n    }\n  }\n\n  return createPortal(\n    <div className=\"Overlay\" onClick={handleBackdropClick}>\n      <div className=\"Modal\">{children}</div>\n    </div>,\n    modalRoot,\n  )\n}\n\n// ***********************\n\n// import { Component } from \"react\";\n// import { createPortal } from \"react-dom\";\n\n// const modalRoot = document.querySelector(\"#modal-root\");\n\n// class Modal extends Component {\n//   componentDidMount() {\n//     window.addEventListener(\"keydown\", this.handleKeyDown);\n//   }\n\n//   componentWillUnmount() {\n//     window.removeEventListener(\"keydown\", this.handleKeyDown);\n//   }\n\n//   handleKeyDown = (e) => {\n//     if (e.code === \"Escape\") {\n//       this.props.onClose();\n//     }\n//   };\n\n//   handleBackdropClick = (evt) => {\n//     if (evt.currentTarget === evt.target) {\n//       this.props.onClose();\n//     }\n//   };\n\n//   render() {\n//     return createPortal(\n//       <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n//         <div className=\"Modal\">{this.props.children}</div>\n//       </div>,\n//       modalRoot\n//     );\n//   }\n// }\n\n// export default Modal;\n","import { useState, useEffect } from 'react'\nimport Loader from 'react-loader-spinner'\nimport ImageGalleryItem from '../ImageGalleryItem'\nimport Button from '../Button'\nimport Modal from '../Modal'\nimport PropTypes from 'prop-types'\n\nconst MY_API_KEY = '23246580-47279d47050c78840bfc8f048'\n\nexport default function ImageGallery({ requestValue }) {\n  const [pageNumber, setPageNumber] = useState(1)\n  const [arrImages, setArrImages] = useState([])\n  const [error, setError] = useState(null)\n  const [status, setStatus] = useState('idle')\n  const [modalImage, setModalImage] = useState('')\n  const [showModal, setShowModal] = useState(false)\n  const [stopFetchOfRequest, setStopFetchOfRequest] = useState(true)\n  const [stopFetchOfPages, setStopFetchOfPages] = useState(true)\n\n  const onRequest = () => {\n    setStatus('pending')\n    fetch(\n      `https://pixabay.com/api/?q=${requestValue}&page=${pageNumber}&key=${MY_API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n    )\n      .then((response) => {\n        if (response.ok) {\n          return response.json()\n        }\n        return Promise.reject(new Error(`Ошибка по запросу ${requestValue}`))\n      })\n      .then((arr) => {\n        setArrImages((prevArrImages) => {\n          if (prevArrImages.length > 0) {\n            return [...prevArrImages, ...arr.hits]\n          }\n          return arr.hits\n        })\n        setStatus('resolved')\n      })\n      .catch((error) => {\n        setError(error)\n        setStatus('rejected')\n      })\n      .finally(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        })\n      })\n\n    return () => {\n      window.scrollTo({\n        top: document.documentElement.scrollHeight,\n        behavior: 'smooth',\n      })\n    }\n  }\n\n  useEffect(() => {\n    if (stopFetchOfRequest) {\n      return setStopFetchOfRequest(false)\n    }\n\n    onRequest()\n    setArrImages([])\n    setPageNumber(1)\n  }, [requestValue])\n\n  useEffect(() => {\n    if (stopFetchOfPages) {\n      return setStopFetchOfPages(false)\n    }\n    onRequest()\n  }, [pageNumber])\n\n  const toggleModal = () => {\n    setShowModal(!showModal)\n  }\n\n  const givLinkForModal = (e) => {\n    const objId = arrImages.find((obj) => obj.id === Number(e.currentTarget.id))\n\n    setModalImage(objId.largeImageURL)\n    toggleModal()\n  }\n\n  const onLoadMore = () => {\n    setPageNumber((prevPageNumber) => prevPageNumber + 1)\n  }\n\n  if (status === 'idle') {\n    return <div>The result of your request will be posted here</div>\n  }\n\n  if (status === 'pending') {\n    return (\n      <Loader\n        type=\"Puff\"\n        color=\"#00BFFF\"\n        height={100}\n        width={100}\n        timeout={3000}\n      />\n    )\n  }\n\n  if (status === 'rejected') {\n    return <div>{error}</div>\n  }\n\n  if (arrImages.length === 0) {\n    return (\n      <div>\n        There are no results for this request: \"{requestValue}\" Сhange request.\n      </div>\n    )\n  }\n\n  if (status === 'resolved') {\n    return (\n      <>\n        <ul className=\"ImageGallery\">\n          <ImageGalleryItem\n            arrImages={arrImages}\n            givLinkForModal={givLinkForModal}\n          />\n        </ul>\n        {arrImages.length > 0 && <Button onLoadMore={onLoadMore} />}\n        {showModal && (\n          <Modal onClose={toggleModal} showModal={showModal}>\n            <img src={modalImage} alt=\"\" />\n          </Modal>\n        )}\n      </>\n    )\n  }\n}\n\nImageGallery.propTypes = {\n  requestValue: PropTypes.string,\n}\n","import { useState } from 'react'\nimport { ToastContainer } from 'react-toastify'\nimport './App.css'\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css'\nimport Searchbar from './components/Searchbar'\nimport ImageGallery from './components/ImageGallery'\n\nexport default function App() {\n  const [requestValue, setRequestValue] = useState('')\n\n  const handleFormSubmit = (requestValueOfSearchbar) => {\n    setRequestValue(requestValueOfSearchbar)\n  }\n\n  return (\n    <div className=\"App\">\n      <Searchbar onSubmit={handleFormSubmit} />\n      <ImageGallery requestValue={requestValue} />\n      <ToastContainer autoClose={2500} />\n    </div>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}