{"version":3,"sources":["components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["Searchbar","state","requestValue","handleRequestChange","evt","setState","currentTarget","value","toLowerCase","handleSubmit","event","preventDefault","trim","toast","error","props","onSubmit","className","this","type","name","onChange","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","arrImages","givLinkForModal","map","obj","id","onClick","src","webformatURL","alt","Button","onLoadMore","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackdropClick","target","window","addEventListener","removeEventListener","createPortal","children","MY_API_KEY","ImageGallery","pageNumber","status","modalImage","showModal","onRequest","fetch","then","response","ok","json","Promise","reject","Error","toggleModal","objId","find","Number","largeImageURL","prevState","prevProps","arr","hits","catch","scrollTo","top","documentElement","scrollHeight","behavior","color","height","width","timeout","length","console","dir","axios","App","handleFormSubmit","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.fc47f946.chunk.js","sourcesContent":["import { Component } from \"react\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport PropTypes from \"prop-types\";\n\nclass Searchbar extends Component {\n  state = {\n    requestValue: \"\",\n  };\n\n  handleRequestChange = (evt) => {\n    this.setState({ requestValue: evt.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    const { requestValue } = this.state;\n\n    if (requestValue.trim() === \"\") {\n      return toast.error(\"измените запрос\", {});\n    }\n    this.setState({ requestValue: \"\" });\n    this.props.onSubmit(requestValue);\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form onSubmit={this.handleSubmit} className=\"SearchForm\">\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            name=\"requestValue\"\n            value={this.state.requestValue}\n            onChange={this.handleRequestChange}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n","import PropTypes from \"prop-types\";\n\nfunction ImageGalleryItem({ arrImages, givLinkForModal }) {\n  return arrImages.map((obj) => {\n    return (\n      <li\n        className=\"ImageGalleryItem\"\n        key={obj.id}\n        id={obj.id}\n        onClick={givLinkForModal}\n      >\n        <img className=\"ImageGalleryItem-image\" src={obj.webformatURL} alt=\"\" />\n      </li>\n    );\n  });\n}\n\nexport default ImageGalleryItem;\n\nImageGalleryItem.propTypes = {\n  givLinkForModal: PropTypes.func,\n  arrImages: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number,\n      webformatURL: PropTypes.string,\n    })\n  ),\n};\n","function Button({ onLoadMore }) {\n  return (\n    <button className=\"Button\" type=\"button\" onClick={onLoadMore}>\n      Load more\n    </button>\n  );\n}\n\nexport default Button;\n","import { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = (evt) => {\n    if (evt.currentTarget === evt.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleBackdropClick}>\n        <div className=\"Modal\">{this.props.children}</div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport ImageGalleryItem from \"../ImageGalleryItem\";\nimport Button from \"../Button\";\nimport Modal from \"../Modal\";\nimport PropTypes from \"prop-types\";\n\nconst MY_API_KEY = \"23246580-47279d47050c78840bfc8f048\";\n\nclass ImageGallery extends Component {\n  state = {\n    pageNumber: 1,\n    arrImages: [],\n    error: null,\n    status: \"idle\",\n    modalImage: \"\",\n    showModal: false,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.requestValue !== this.props.requestValue) {\n      this.setState({\n        status: \"pending\",\n        pageNumber: 1,\n      });\n\n      this.onRequest()\n        .then((arr) =>\n          this.setState({\n            arrImages: arr.hits,\n            status: \"resolved\",\n          })\n        )\n        .catch((error) => this.setState({ error: error, status: \"rejected\" }));\n    }\n\n    if (prevState.pageNumber !== this.state.pageNumber) {\n      this.setState({\n        status: \"pending\",\n      });\n      this.onRequest()\n        .then((arr) =>\n          this.setState({\n            arrImages: [...prevState.arrImages, ...arr.hits],\n            status: \"resolved\",\n          })\n        )\n        .catch((error) => this.setState({ error: error, status: \"rejected\" }));\n    }\n\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  }\n\n  onRequest = () => {\n    const { requestValue } = this.props;\n    return fetch(\n      `https://pixabay.com/api/?q=${requestValue}&page=${this.state.pageNumber}&key=${MY_API_KEY}&image_type=photo&orientation=horizontal&per_page=12`\n    ).then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      return Promise.reject(new Error(`Ошибка по запросу ${requestValue}`));\n    });\n  };\n\n  toggleModal = () => {\n    this.setState((state) => ({\n      showModal: !state.showModal,\n    }));\n  };\n\n  givLinkForModal = (e) => {\n    const objId = this.state.arrImages.find(\n      (obj) => obj.id === Number(e.currentTarget.id)\n    );\n\n    this.setState({\n      modalImage: objId.largeImageURL,\n    });\n\n    this.toggleModal();\n  };\n\n  onLoadMore = () => {\n    this.setState((prevState) => ({\n      pageNumber: prevState.pageNumber + 1,\n    }));\n  };\n\n  render() {\n    const { status, error, arrImages, showModal, modalImage } = this.state;\n    if (status === \"idle\") {\n      return <div>The result of your request will be posted here</div>;\n    }\n\n    if (status === \"pending\") {\n      return (\n        <Loader\n          type=\"Puff\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          timeout={3000}\n        />\n      );\n    }\n\n    if (status === \"rejected\") {\n      return <div>{error}</div>;\n    }\n\n    if (arrImages.length === 0) {\n      return (\n        <div>\n          There are no results for this request: \"{this.props.requestValue}\"\n          Сhange request.\n        </div>\n      );\n    }\n\n    if (status === \"resolved\") {\n      return (\n        <>\n          <ul className=\"ImageGallery\">\n            <ImageGalleryItem\n              arrImages={arrImages}\n              givLinkForModal={this.givLinkForModal}\n            />\n          </ul>\n          {arrImages.length > 0 && <Button onLoadMore={this.onLoadMore} />}\n          {showModal && (\n            <Modal onClose={this.toggleModal}>\n              <img src={modalImage} alt=\"\" />\n            </Modal>\n          )}\n        </>\n      );\n    }\n  }\n}\nexport default ImageGallery;\n\nImageGallery.propTypes = {\n  requestValue: PropTypes.string,\n};\n","import { Component } from 'react'\nimport { ToastContainer } from 'react-toastify'\nimport './App.css'\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css'\nimport Searchbar from './components/Searchbar'\nimport ImageGallery from './components/ImageGallery'\nimport axios from 'axios'\nconsole.dir(axios)\n\n// модалку приспособить\n\nclass App extends Component {\n  state = {\n    requestValue: '',\n  }\n\n  handleFormSubmit = (requestValue) => {\n    this.setState({ requestValue })\n  }\n\n  render() {\n    const { requestValue } = this.state\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        <ImageGallery requestValue={requestValue} />\n        <ToastContainer autoClose={2500} />\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}